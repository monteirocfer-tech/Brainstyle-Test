<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brainstyle | Inventário de Modelo Mental</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Paleta inspirada na imagem (roxo -> azul -> ciano) */
            --primary: #a855f7;      /* roxo */
            --secondary: #06b6d4;    /* ciano */
            --accent: #3b82f6;       /* azul */
            --dark-bg: #0b0e14;

            /* RGB para usar em rgba */
            --primary-rgb: 168, 85, 247;
            --secondary-rgb: 6, 182, 212;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--dark-bg);
            color: #f1f5f9;
            margin: 0;
            min-height: 100vh;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }

        .glass-card:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .glass-card.selected {
            background: rgba(var(--primary-rgb), 0.16);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(var(--primary-rgb), 0.22);
        }

        .option-label {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            font-weight: 800;
            font-size: 14px;
            margin-bottom: 12px;
            transition: all 0.3s;
        }

        .selected .option-label {
            background: var(--primary);
            color: white;
        }

        .bg-blob {
            position: fixed;
            z-index: -1;
            filter: blur(80px);
            opacity: 0.2;
            border-radius: 50%;
        }

        .hidden-screen { display: none !important; }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-in { animation: fadeInUp 0.5s ease-out forwards; }
        
        .unanswered-highlight {
            border: 2px solid #ef4444 !important;
            background: rgba(239, 68, 68, 0.05) !important;
        }
    </style>
</head>
<body class="flex flex-col items-center">

    <div class="bg-blob w-96 h-96 bg-fuchsia-500 top-[-100px] left-[-50px]"></div>
    <div class="bg-blob w-[500px] h-[500px] bg-cyan-500 bottom-[-150px] right-[-100px]"></div>

    <div id="main-container" class="w-full max-w-4xl px-4 py-8 min-h-screen flex flex-col justify-center">
        
        <!-- LOGIN -->
        <section id="login-section" class="flex flex-col items-center text-center animate-in">
            <h1 class="text-5xl font-black mb-4 bg-clip-text text-transparent bg-gradient-to-r from-fuchsia-400 via-blue-400 to-cyan-300">Brainstyle</h1>
            <p class="text-gray-400 text-lg mb-10">Insira a chave para iniciar a sua análise de perfil.</p>
            <div class="w-full max-w-sm glass-panel p-8 rounded-[32px] space-y-4">
                <input type="password" id="pass-input" placeholder="Palavra-passe" class="w-full bg-black/40 border border-white/10 rounded-2xl py-4 px-6 text-center text-white focus:outline-none focus:border-fuchsia-500 text-lg">
                <button onclick="checkAuth()" class="w-full bg-gradient-to-r from-fuchsia-500 via-blue-500 to-cyan-400 py-4 rounded-2xl font-bold uppercase tracking-widest hover:opacity-90 transition-all">Entrar</button>
                <p id="error-msg" class="text-fuchsia-400 text-sm font-semibold hidden">Chave incorreta. Tente novamente.</p>
            </div>
        </section>

        <!-- INTRODUÇÃO -->
        <section id="intro-section" class="hidden-screen animate-in max-w-2xl mx-auto">
            <div class="glass-panel p-10 md:p-12 rounded-[40px] space-y-8">
                <div class="text-center">
                    <h2 class="text-3xl font-black mb-2">Orientações para o Teste</h2>
                    <p class="text-cyan-300 font-bold uppercase tracking-widest text-sm mb-6">Descubra o seu modelo mental!</p>
                </div>
                
                <div class="space-y-6 text-gray-300 leading-relaxed">
                    <p class="text-center font-semibold text-white">
                        Não existe brainstyle melhor ou mais inteligente que outro. Cada força tem suas vantagens e desvantagens!
                    </p>

                    <div class="space-y-4 bg-white/5 p-6 rounded-2xl border border-white/5">
                        <p class="text-sm">Você deve refletir sobre sua reação a situações novas e pouco familiares e ao iniciar o inventário, tente distinguir:</p>
                        <ul class="list-disc pl-5 space-y-3 text-sm text-gray-400">
                            <li>Entre o que aprendeu, ou do que se lembra, e o que lhe é <span class="text-fuchsia-300 font-bold">natural</span></li>
                            <li>Entre o que as situações exigem de você e o que faz com seus <span class="text-fuchsia-300 font-bold">talentos naturais</span></li>
                            <li>Entre como quer ser visto e como você <span class="text-fuchsia-300 font-bold">realmente é</span></li>
                        </ul>
                    </div>

                    <div class="text-center space-y-3">
                        <p class="text-sm font-medium">Não existe resposta certa ou errada.</p>
                        <p class="text-sm font-bold text-cyan-200 italic">Para identificar seu brainstyle, responda sinceramente a cada item, caso não se identifique nem com A ou B, selecione "não me identifico".</p>
                    </div>
                </div>

                <div class="pt-4">
                    <button onclick="startQuiz()" class="w-full bg-gradient-to-r from-fuchsia-500 via-blue-500 to-cyan-400 py-4 rounded-2xl font-bold uppercase tracking-widest hover:scale-[1.02] active:scale-95 transition-all shadow-lg shadow-cyan-500/20">Começar Agora</button>
                </div>
            </div>
        </section>

        <!-- QUESTIONÁRIO -->
        <section id="quiz-section" class="hidden-screen flex-1 pt-10">
            <div class="fixed top-0 left-0 w-full glass-panel z-50 px-6 py-4 flex justify-center">
                <div class="max-w-4xl w-full flex items-center justify-between">
                    <span id="page-indicator" class="text-xs font-black uppercase tracking-widest text-cyan-300">Página 1 de 3</span>
                    <div id="progress-bar" class="flex-1 mx-8 h-1 bg-white/10 rounded-full overflow-hidden">
                        <div id="progress-fill" class="h-full transition-all duration-500" style="width: 0%; background: var(--primary);"></div>
                    </div>
                </div>
            </div>
            <div id="questions-list" class="space-y-8 mt-16 pb-32"></div>
            <div class="fixed bottom-0 left-0 w-full p-6 flex justify-center bg-gradient-to-t from-black via-black/90 to-transparent">
                <div class="max-w-4xl w-full flex flex-col items-center gap-4">
                    <p id="quiz-warning" class="text-fuchsia-400 text-xs font-bold hidden animate-pulse italic">Atenção: Existem questões sem resposta nesta página.</p>
                    <div class="w-full flex gap-4">
                        <button id="prev-btn" onclick="prevPage()" class="hidden flex-1 bg-white/5 border border-white/10 py-4 rounded-2xl font-bold uppercase tracking-widest">Anterior</button>
                        <button id="next-btn" onclick="nextPage()" class="flex-[2] bg-blue-600 py-4 rounded-2xl font-bold uppercase tracking-widest">Próxima Página</button>
                        <button id="finish-btn" onclick="processResults()" class="hidden flex-[2] bg-fuchsia-500 py-4 rounded-2xl font-bold uppercase tracking-widest">Finalizar e Ver Perfil</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- RESULTADOS -->
        <section id="result-section" class="hidden-screen animate-in w-full">
            <div class="glass-panel rounded-[40px] overflow-hidden p-8 md:p-12">
                <div class="text-center mb-10">
                    <span class="text-fuchsia-300 text-[10px] font-black uppercase tracking-[0.3em] mb-4 block">Resultado Final da Análise</span>
                    <h2 id="result-title" class="text-4xl md:text-5xl font-black mb-2 break-words">...</h2>
                    <p id="result-subtitle" class="text-cyan-300 font-bold uppercase tracking-widest text-xs break-words"></p>
                </div>
                
                <div class="grid md:grid-cols-3 gap-6 mb-12">
                    <div class="bg-white/5 p-6 rounded-3xl border border-white/10">
                        <h4 class="text-fuchsia-300 text-[10px] font-black uppercase mb-3">No tempo zero</h4>
                        <p id="res-tempo" class="text-sm text-gray-300"></p>
                    </div>
                    <div class="bg-white/5 p-6 rounded-3xl border border-white/10">
                        <h4 class="text-fuchsia-300 text-[10px] font-black uppercase mb-3">A impressão de</h4>
                        <ul id="res-impressao" class="text-xs text-gray-400 space-y-2 list-disc pl-4"></ul>
                    </div>
                    <div class="bg-white/5 p-6 rounded-3xl border border-white/10">
                        <h4 class="text-fuchsia-300 text-[10px] font-black uppercase mb-3">Forças Essenciais</h4>
                        <ul id="res-forcas" class="text-xs text-gray-400 space-y-2 list-disc pl-4"></ul>
                    </div>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 border-t border-white/5 pt-8">
                    <div class="text-center p-4 rounded-2xl transition-all border border-transparent" id="card-DELIBERADOR"><p class="text-[10px] uppercase text-gray-500 mb-1">Deliberador</p><p id="sc-DELIBERADOR" class="text-2xl font-black">0</p></div>
                    <div class="text-center p-4 rounded-2xl transition-all border border-transparent" id="card-CONHECEDOR"><p class="text-[10px] uppercase text-gray-500 mb-1">Conhecedor</p><p id="sc-CONHECEDOR" class="text-2xl font-black">0</p></div>
                    <div class="text-center p-4 rounded-2xl transition-all border border-transparent" id="card-IDEALIZADOR"><p class="text-[10px] uppercase text-gray-500 mb-1">Idealizador</p><p id="sc-IDEALIZADOR" class="text-2xl font-black">0</p></div>
                    <div class="text-center p-4 rounded-2xl transition-all border border-transparent" id="card-CONCILIADOR"><p class="text-[10px] uppercase text-gray-500 mb-1">Conciliador</p><p id="sc-CONCILIADOR" class="text-2xl font-black">0</p></div>
                </div>

                <button onclick="window.location.reload()" class="mt-12 w-full py-4 rounded-xl bg-white/5 border border-white/10 font-bold uppercase tracking-widest hover:bg-white/10 transition-colors">Refazer o Inventário</button>
            </div>
        </section>
    </div>

    <script>
        const AUTH_KEY = "Vigor2026";

        // Validade de 15 dias a partir de 20/02/2026 => expira em 07/03/2026 (fim do dia, horário -03:00)
        const KEY_EXPIRES_AT = new Date("2026-03-07T23:59:59-03:00");

        const QUESTIONS_PER_PAGE = 6;
        let currentPage = 1;
        let userAnswers = {};

        const DATA = [
            { id: 1, a: "Em uma nova situação, minhas primeiras reações são sentimentos sobre coisas. Só mais tarde eu me torno mais objetivo e reflito melhor.", b: "Em uma nova situação, considero primeiro os fatos. Posso ter consciência dos meus sentimentos, mas quase sempre penso antes de responder.", map: {a: 'CONCILIADOR', b: 'DELIBERADOR'} },
            { id: 2, a: "Sou naturalmente inventivo. Desenvolvo soluções novas e completas para problemas complexos, mais rapidamente do que faço relacionamentos.", b: "Sou naturalmente amigável, faço relacionamentos mais depressa e mais facilmente do que consigo desenvolver soluções novas e completas para problemas complexos.", map: {a: 'IDEALIZADOR', b: 'CONCILIADOR'} },
            { id: 3, a: "De modo típico, não tomo decisões rápidas em novas áreas. Hesito, a fim de avaliar mais detalhes sem levar em consideração meus sentimentos.", b: "De modo típico, decido rapidamente nas novas áreas e raras vezes reconsidero a decisão.", map: {a: 'DELIBERADOR', b: 'CONHECEDOR'} },
            { id: 4, a: "Minhas novas decisões resultam de uma boa lógica que definiu o que está errado. Não sou facilmente desviado de uma resposta simples e lógica por sentimentos ou intuições.", b: "Minhas novas decisões resultam de “ver” como solucionar problemas. Eu “texto quadros mentais” de um modo que não posso descrever facilmente para chegar a duas ou três soluções completas novas.", map: {a: 'CONHECEDOR', b: 'IDEALIZADOR'} },
            { id: 5, a: "Embora eu possa dar uma reposta para um novo problema, sou melhor para formular e aperfeiçoar um plano a fim de resolvê-lo, incluindo os detalhes necessários.", b: "Embora eu possa dar uma resposta para um novo problema, sou melhor para criar uma nova direção e não tão hábil em refletir sobre os detalhes completos do plano.", map: {a: 'DELIBERADOR', b: 'IDEALIZADOR'} },
            { id: 6, a: "Sou melhor em resolver problemas complexos, tangíveis, com respostas simples e práticas. Sou mais capaz de conceber o que deve ser feito do que em levar outros a fazerem o que é necessário.", b: "Sou melhor em resolver problemas complexos com sentimentos e discernimentos. Sou melhor como parte de uma equipe ou quando incluo outros.", map: {a: 'CONHECEDOR', b: 'CONCILIADOR'} },
            { id: 7, a: "De modo geral, reajo antes de pensar. Posso ter conhecimento dos fatos, mas minha primeira reação quase sempre reflete meus sentimentos.", b: "De modo geral, reajo depois de pensar nos fatos. Posso ter consciência dos meus sentimentos, mas minha primeira reação quase sempre reflete fatos e não emoções.", map: {a: 'CONCILIADOR', b: 'DELIBERADOR'} },
            { id: 8, a: "Sou naturalmente eficiente. Chego rapidamente às conclusões, especialmente nas novas áreas.", b: "Sou naturalmente detalhista. Colho informações nas áreas novas, a fim de assegurar exatidão antes de decidir.", map: {a: 'CONHECEDOR', b: 'DELIBERADOR'} },
            { id: 9, a: "Quando trato de um problema desconhecido, tipicamente descubro novas formas de aplicar o que sei. A solução é prática e faz sentido imediato.", b: "Quando trato de um problema desconhecido, tipicamente reúno informações contraditórias para ultrapassar o que já é conhecido. A seguir, ofereço uma direção geral sobre como resolver o problema.", map: {a: 'CONHECEDOR', b: 'IDEALIZADOR'} },
            { id: 10, a: "A princípio, tomo mais consciência das reações não verbais do que dos fatos em uma situação nova.", b: "A princípio, tomo mais consciência dos fatos em uma situação nova do que das reações não verbais.", map: {a: 'CONCILIADOR', b: 'CONHECEDOR'} },
            { id: 11, a: "Inicialmente, minhas novas ideias são tão incomuns ou conceituais que as pessoas têm dificuldade para aceitá-las. Posso criar uma nova direção sem considerar o apoio delas.", b: "Inicialmente, quero que todos gostem de mim e de minhas ideias. Sou melhor em criar uma nova direção quando outros apoiam minhas ideias.", map: {a: 'IDEALIZADOR', b: 'CONCILIADOR'} },
            { id: 12, a: "Sou melhor em apresentar novas soluções práticas e de fácil compreensão.", b: "Sou melhor em oferecer novas ideias que talvez pareçam pouco claras a princípio, mas que redefinem essencialmente o problema de modo que as soluções se seguem.", map: {a: 'CONHECEDOR', b: 'IDEALIZADOR'} },
            { id: 13, a: "Contribuo mais, comparando metodicamente um novo problema com uma situação passada antes de estabelecer alvos.", b: "Quando se trata de um novo problema, contribuo mais vendo e testando mentalmente novas soluções para estabelecer uma visão geral antes de determinar metas.", map: {a: 'DELIBERADOR', b: 'IDEALIZADOR'} },
            { id: 14, a: "Sou quase sempre conciso e até brusco, porque raramente noto ou considero as emoções. Chego rapidamente aos resultados.", b: "Levo tempo porque sinto os sentimentos dos outros. No geral, noto ou considero as emoções para chegar a um acordo em que todos se sintam bem tanto a meu respeito como em relação à ideia apresentada.", map: {a: 'CONHECEDOR', b: 'CONCILIADOR'} },
            { id: 15, a: "Desde que avalio imediatamente as ideias alheias, sou melhor quando encontro soluções mais racionais baseadas na minha experiência.", b: "Desde que reajo espontaneamente à minha intuição sobre os sentimentos das pessoas, sou melhor em encontrar soluções baseadas na minha empatia em relação a outros.", map: {a: 'DELIBERADOR', b: 'CONCILIADOR'} },
            { id: 16, a: "Sou melhor quando invento estratégias e instruções a longo prazo, diferentes de quaisquer outras que já conhecia antes. Levo mais tempo para explicar minhas ideias e as pessoas ficam então mais entusiasmadas com elas.", b: "Sou melhor quando provoco o entusiasmo das pessoas sobre as possibilidades de projetos já definidos. Levo mais tempo para definir estratégias e instruções a longo prazo.", map: {a: 'IDEALIZADOR', b: 'CONCILIADOR'} },
            { id: 17, a: "Descubro rapidamente soluções não emocionais para novas situações sem muita análise. Isso é tipicamente tudo que é necessário.", b: "Descubro soluções refletidas para novas situações, avaliando-as metodicamente primeiro e depois fragmentando-as para novas análises.", map: {a: 'CONHECEDOR', b: 'DELIBERADOR'} },
            { id: 18, a: "Com um problema novo, analiso o que deu errado, colhendo cuidadosamente todos os fatos e comparando-os com as respostas certas dadas no passado ou conhecidas antes de procurar resolver o problema.", b: "Com um problema novo, devo ver e testar várias imagens mentais que solucionem todo o problema ou que mudem inteiramente o método de definição do mesmo antes de tentar resolvê-lo.", map: {a: 'DELIBERADOR', b: 'IDEALIZADOR'} }
        ];

        const PROFILES = {
            DELIBERADOR: { 
                title: "Deliberador(a)", 
                sub: "Análise & Estratégia",
                tempo: "Pensa antes de reagir",
                impressao: ["Indagador desafiador", "Conhecedor", "Indiferente ou pensativa a princípio", "Complexa e Analítica", "Indutiva"],
                forcas: ["Alguém que avalia as coisas primeiro e depois aprende", "Usa análise passo a passo para chegar a uma visão geral", "Um planejador", "Uma pessoa multifacetada"]
            },
            CONHECEDOR: { 
                title: "Conhecedor(a)", 
                sub: "Pragmatismo & Lógica",
                tempo: "Resposta lógica, clara",
                impressao: ["Conclusiva", "Tomada de decisões não emocionais", "Confrontativa", "Simplificada", "Dedutiva"],
                forcas: ["Alguém que explica as coisas primeiro, sem emoção", "Uma pessoa que vai para a causa e apresenta soluções simples", "Uma pessoa que conserta coisas", "Alguém que soluciona problemas", "Uma pessoa lógica"]
            },
            IDEALIZADOR: { 
                title: "Idealizador(a)", 
                sub: "Visão & Inovação",
                tempo: "Resposta generalizada ou vaga",
                impressao: ["Suposição ampla, sem fatos, um estereótipo", "Exploradora de possibilidades", "Inventiva, porém estratégica", "Distante e Dedutiva"],
                forcas: ["Alguém que propõe soluções e depois as experimenta", "Uma pessoa inventiva, difícil de entender a princípio", "Aceita riscos", "Procura caminhos", "Um visionário"]
            },
            CONCILIADOR: { 
                title: "Conciliador(a)", 
                sub: "Empatia & Influência",
                tempo: "Reações ou respostas rápidas",
                impressao: ["Espontânea", "Tomada de decisões rápidas e depois muda as mesmas, age rapidamente", "Mais imaginativa que estratégica", "Informativa, amigável, conversadora, indutiva"],
                forcas: ["Alguém que imagina rapidamente possibilidades", "Uma pessoa emocional, intuitiva", "Alguém que toma decisões e depois muda de ideia", "Um influenciador, carismático", "Uma pessoa sociável", "Uma pessoa inspiradora"]
            }
        };

        function checkAuth() {
            const now = new Date();
            if (now > KEY_EXPIRES_AT) {
                const msg = document.getElementById('error-msg');
                msg.textContent = "Chave expirada.";
                msg.classList.remove('hidden');
                return;
            }

            if (document.getElementById('pass-input').value === AUTH_KEY) {
                document.getElementById('login-section').classList.add('hidden-screen');
                document.getElementById('intro-section').classList.remove('hidden-screen');
            } else {
                const msg = document.getElementById('error-msg');
                msg.textContent = "Chave incorreta. Tente novamente.";
                msg.classList.remove('hidden');
            }
        }

        function startQuiz() {
            document.getElementById('intro-section').classList.add('hidden-screen');
            document.getElementById('quiz-section').classList.remove('hidden-screen');
            renderPage();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderPage() {
            const start = (currentPage - 1) * QUESTIONS_PER_PAGE;
            const currentQuestions = DATA.slice(start, start + QUESTIONS_PER_PAGE);
            document.getElementById('questions-list').innerHTML = currentQuestions.map(q => `
                <div id="q-container-${q.id}" class="glass-panel p-6 rounded-[32px] animate-in transition-all">
                    <p class="text-[10px] font-black text-gray-500 mb-4 uppercase tracking-[0.2em]">Questão ${q.id}</p>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div id="q${q.id}a" onclick="pick(${q.id}, 'a')" class="glass-card p-5 rounded-2xl ${userAnswers[q.id] === 'a' ? 'selected' : ''}">
                            <div class="option-label">A</div><p class="text-sm">${q.a}</p>
                        </div>
                        <div id="q${q.id}b" onclick="pick(${q.id}, 'b')" class="glass-card p-5 rounded-2xl ${userAnswers[q.id] === 'b' ? 'selected' : ''}">
                            <div class="option-label">B</div><p class="text-sm">${q.b}</p>
                        </div>
                    </div>
                    <div class="mt-4 flex justify-center">
                        <button onclick="pick(${q.id}, 'none')" class="text-[10px] uppercase font-bold tracking-widest px-4 py-2 rounded-lg transition-all border ${userAnswers[q.id] === 'none' ? 'border-fuchsia-500/50 bg-fuchsia-500/10 text-fuchsia-300' : 'border-white/5 text-gray-500 hover:text-gray-300'}">
                            Não me identifico com nenhuma das declarações
                        </button>
                    </div>
                </div>
            `).join('');
            updateControls();
        }

        function pick(id, opt) {
            userAnswers[id] = opt;
            const container = document.getElementById(`q-container-${id}`);
            if(container) container.classList.remove('unanswered-highlight');
            
            checkPageAnswers();
            renderPage();
            
            const count = Object.keys(userAnswers).length;
            document.getElementById('progress-fill').style.width = `${(count / 18) * 100}%`;
        }

        function checkPageAnswers() {
            const start = (currentPage - 1) * QUESTIONS_PER_PAGE;
            const end = start + QUESTIONS_PER_PAGE;
            let allAnswered = true;
            
            for (let i = start + 1; i <= end; i++) {
                if (!userAnswers[i]) {
                    allAnswered = false;
                    break;
                }
            }
            
            if (allAnswered) {
                document.getElementById('quiz-warning').classList.add('hidden');
            }
            return allAnswered;
        }

        function updateControls() {
            document.getElementById('page-indicator').innerText = `Página ${currentPage} de 3`;
            document.getElementById('prev-btn').classList.toggle('hidden', currentPage === 1);
            document.getElementById('next-btn').classList.toggle('hidden', currentPage === 3);
            document.getElementById('finish-btn').classList.toggle('hidden', currentPage !== 3);
        }

        function highlightUnanswered() {
            const start = (currentPage - 1) * QUESTIONS_PER_PAGE;
            const end = start + QUESTIONS_PER_PAGE;
            let firstUnanswered = null;

            for (let i = start + 1; i <= end; i++) {
                const container = document.getElementById(`q-container-${i}`);
                if (!userAnswers[i]) {
                    if(container) container.classList.add('unanswered-highlight');
                    if (!firstUnanswered) firstUnanswered = container;
                } else {
                    if(container) container.classList.remove('unanswered-highlight');
                }
            }

            if (firstUnanswered) {
                firstUnanswered.scrollIntoView({ behavior: 'smooth', block: 'center' });
                document.getElementById('quiz-warning').classList.remove('hidden');
            }
        }

        function nextPage() { 
            if (checkPageAnswers()) {
                if (currentPage < 3) { 
                    currentPage++; 
                    renderPage(); 
                    window.scrollTo({ top: 0, behavior: 'smooth' }); 
                } 
            } else {
                highlightUnanswered();
            }
        }

        function prevPage() { 
            if (currentPage > 1) { 
                currentPage--; 
                renderPage(); 
                window.scrollTo({ top: 0, behavior: 'smooth' }); 
            } 
        }

        function processResults() {
            if (!checkPageAnswers()) {
                highlightUnanswered();
                return;
            }

            const scores = { DELIBERADOR: 0, CONHECEDOR: 0, IDEALIZADOR: 0, CONCILIADOR: 0 };
            Object.entries(userAnswers).forEach(([id, opt]) => {
                if(opt !== 'none') {
                    scores[DATA[id-1].map[opt]]++;
                }
            });
            
            const totalPoints = Object.values(scores).reduce((a, b) => a + b, 0);
            if (totalPoints === 0) {
                alert("Para gerar um perfil, precisas de te identificar com pelo menos algumas declarações (A ou B).");
                return;
            }

            const win = Object.keys(scores).reduce((a, b) => scores[a] >= scores[b] ? a : b);
            
            document.getElementById('quiz-section').classList.add('hidden-screen');
            document.getElementById('result-section').classList.remove('hidden-screen');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            const p = PROFILES[win];
            document.getElementById('result-title').innerText = p.title;
            document.getElementById('result-subtitle').innerText = p.sub;
            document.getElementById('res-tempo').innerText = p.tempo;
            document.getElementById('res-impressao').innerHTML = p.impressao.map(i => `<li>${i}</li>`).join('');
            document.getElementById('res-forcas').innerHTML = p.forcas.map(f => `<li>${f}</li>`).join('');

            Object.entries(scores).forEach(([k, v]) => {
                const card = document.getElementById(`card-${k}`);
                document.getElementById(`sc-${k}`).innerText = v;
                card.classList.remove('bg-fuchsia-500/20', 'border-fuchsia-500/50');
                if(k === win) card.classList.add('bg-fuchsia-500/20', 'border-fuchsia-500/50');
            });
        }
    </script>
</body>
</html>
